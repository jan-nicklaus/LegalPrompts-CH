<!DOCTYPE html>
<html><head>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <title>Legal Prompt Builder</title>
        <script defer="defer" src="Legal%20Prompt%20Builder-Dateien/cdn.min.js"></script>
        <link href="Legal%20Prompt%20Builder-Dateien/style.css" rel="stylesheet">
    </head>
    <body>
        <script type="text/javascript">
            document.addEventListener("alpine:init", () => {
                Alpine.data("state", () => ({
                    "task": "entscheid-zsfg",
                    "fields": {
                        "entscheid-zsfg": {
                            "display_name": "Entscheid zusammenfassen",
                            "inputs": [
                                {
                                    "name": "fundstelle",
                                    "display_name": "Fundstelle",
                                    "type": "text",
                                    "value": ""
                                },
                                {
                                    "name": "rolle",
                                    "display_name": "Was ist Ihre Rolle?",
                                    "type": "text",
                                    "value": ""
                                }
                            ]
                        },
                        "task-zwei": {
                            "display_name": "Zweiter Task",
                            "inputs": [
                                {
                                    "name": "fundstelle",
                                    "display_name": "Was ist deine Lieblingsfarbe?",
                                    "type": "text",
                                    "value": ""
                                },
                                {
                                    "name": "rolle",
                                    "display_name": "Was ist dein Lieblingstier?",
                                    "type": "text",
                                    "value": ""
                                }
                            ]
                        }
                    },
                    "promptComplete": "",
                    async getTaskSelectHTML() {
                        console.log("test");
                        let options = Object.keys(this.fields).map(t => `<option value="${t}">${this.fields[t].display_name}</option>`).join("");
                        console.log(options);
                        return `<select x-bind:value="task" @change="e => task = e.target.value">
                                ${options}
                            </select>`
                    },
                    async getTaskFieldHTML() {
                        let html = "";
                        let i=0;
                        this.fields[this.task].inputs.forEach(field => {
                            html += `<div class="flex flex-row items-center"><p>${field.display_name}: </p><input type="${field.type}" class="border border-black m-2 rounded " x-bind:value="fields['${this.task}'].inputs[${i}].value" @change="e => fields['${this.task}'].inputs[${i}].value = e.target.value"/></div>`
                        });
                        return html;
                    },
                    async generatePrompt() {
                        this.promptComplete = "test";
                    }
                }))
            });
        </script>
        <div x-data="state" id="basediv">
            <h1 class="text-2xl">Legal Prompt Builder v0.1</h1>
            <div x-html="getTaskSelectHTML"></div>
            <div x-html="getTaskFieldHTML"></div>
            <button class="border rounded border-black p-2" @click="generatePrompt">Prompt generieren</button>
            <p x-text="promptComplete"></p>
        </div>
    
 </body></html>